<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Chat</title>
</head>
<body>
<div id="chat"></div>
<input type="text" id="username" placeholder="Username">
<input type="text" id="message" placeholder="Message">
<button onclick="sendMessage()">Send</button>

<script>
    async function fetchMessages() {
        const response = await fetch('/api/messages');
        const m
    essages = await response.json();
               const chatDiv = document.getElementById('chat');
               chatDiv.innerHTML = '';
               messages.forEach(msg => {
                   const msgDiv = document.createElement('div');
                   msgDiv.textContent = `${msg.timestamp} [${msg.username}]: ${msg.content}`;
                   chatDiv.appendChild(msgDiv);
               });
           }

           async function sendMessage() {
               const username = document.getElementById('username').value;
               const message = document.getElementById('message').value;

               await fetch('/api/messages', {
                   method: 'POST',
                   headers: {
                       'Content-Type': 'application/json',
                   },
                   body: JSON.stringify({ username, content: message }),
               });

               document.getElementById('message').value = '';
               fetchMessages();
           }

           setInterval(fetchMessages, 2000); // Polling every 2 seconds
</script>
</body>
</html>